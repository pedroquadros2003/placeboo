 #: import spinner_with_arrow auxiliary_classes.spinner_with_arrow

<EventsView>:
    # This view will show only if NO patient is selected
    BoxLayout:
        opacity: 1 if not root.current_patient_user else 0
        disabled: False if not root.current_patient_user else True
        Label:
            text: 'Selecione um paciente para ver os detalhes.'
            font_size: '14sp'
            color: 0.3, 0.3, 0.3, 1

    # This view will show content only if a patient is selected
    ScrollView:
        opacity: 1 if root.current_patient_user else 0
        disabled: False if root.current_patient_user else True
        BoxLayout:
            orientation: 'vertical'
            padding: dp(10)
            spacing: dp(10)
            size_hint_y: None
            height: self.minimum_height

            # Area for adding new events
            BoxLayout:
                orientation: 'vertical'
                size_hint_y: None
                height: self.minimum_height
                padding: dp(10)
                spacing: dp(10)

                TextInput:
                    id: event_name_input
                    hint_text: 'Nome do Exame/Consulta'
                    size_hint_y: None
                    height: dp(48)
                    multiline: False

                BoxLayout:
                    orientation: 'vertical'
                    size_hint_y: None
                    height: self.minimum_height
                    spacing: dp(5)

                    Label:
                        text: 'Data:'
                        color: 0,0,0,1
                        size_hint_y: None
                        height: self.texture_size[1]
                        halign: 'left'
                        padding: [dp(5), 0]
                    BoxLayout:
                        orientation: 'horizontal'
                        spacing: dp(10)
                        size_hint_y: None
                        height: dp(48)

                        TextInput:
                            id: day_input
                            hint_text: 'Dia'
                            input_filter: 'int'
                            multiline: False
                            on_text: root.enforce_text_limit(self, 2)

                        SpinnerWithArrow:
                            id: event_month_spinner
                            text: 'Mês'
                            values: ['Janeiro', 'Fevereiro', 'Março', 'Abril', 'Maio', 'Junho', 'Julho', 'Agosto', 'Setembro', 'Outubro', 'Novembro', 'Dezembro']

                        SpinnerWithArrow:
                            id: event_year_spinner
                            text: 'Ano'
                            values: root.year_list
                    
                    Button:
                        text: 'Preencher com a data de hoje'
                        size_hint_y: None
                        height: dp(40)
                        font_size: '13sp'
                        on_press: root.fill_today_date()

                    Label:
                        text: 'Horário:'
                        color: 0,0,0,1
                        size_hint_y: None
                        height: self.texture_size[1]
                        halign: 'left'
                        padding: [dp(5), 0]
                    BoxLayout:
                        spacing: dp(10)
                        size_hint_y: None
                        height: dp(48)
                        SpinnerWithArrow:
                            id: event_hour_spinner
                            text: 'Hora'
                            values: root.hour_list

                        SpinnerWithArrow:
                            id: event_minute_spinner
                            text: 'Min'
                            values: root.minute_list

                TextInput:
                    id: event_description_input
                    hint_text: 'Descrição (opcional)'
                    size_hint_y: None
                    on_text: root.enforce_text_limit(self, 300)
                    height: dp(96)

                Button:
                    opacity: 1 if not root.editing_event_id else 0
                    disabled: True if root.editing_event_id else False
                    text: 'Adicionar Exame/Consulta'
                    size_hint_y: None
                    height: dp(48)
                    on_press: root.add_event()

                BoxLayout:
                    opacity: 1 if root.editing_event_id else 0
                    disabled: False if root.editing_event_id else True
                    size_hint_y: None
                    height: dp(48) if root.editing_event_id else 0
                    Button:
                        text: 'Salvar Alteração'
                        on_press: root.save_event_edit()
                    Button:
                        text: 'Cancelar'
                        on_press: root.cancel_edit()
            
            # Container for the list of events
            GridLayout:
                id: events_list
                cols: 1
                size_hint_x: 1
                size_hint_y: None
                height: self.minimum_height
                padding: dp(10)
                spacing: dp(15)

<EventItem>:
    size_hint_y: None
    height: self.minimum_height
